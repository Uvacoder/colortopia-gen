const colors = [
         // Red
         { name: "Red 0", color: "#fff5f5" },
         { name: "Red 1", color: "#ffe3e3" },
         { name: "Red 2", color: "#ffc9c9" },
         { name: "Red 3", color: "#ffa8a8" },
         { name: "Red 4", color: "#ff8787" },
         { name: "Red 5", color: "#ff6b6b" },
         { name: "Red 6", color: "#fa5252" },
         { name: "Red 7", color: "#f03e3e" },
         { name: "Red 8", color: "#e03131" },
         { name: "Red 9", color: "#c92a2a" },

         // Pink
         { name: "Pink 0", color: "#fff0f6" },
         { name: "Pink 1", color: "#ffdeeb" },
         { name: "Pink 2", color: "#fcc2d7" },
         { name: "Pink 3", color: "#faa2c1" },
         { name: "Pink 4", color: "#f783ac" },
         { name: "Pink 5", color: "#f06595" },
         { name: "Pink 6", color: "#e64980" },
         { name: "Pink 7", color: "#d6336c" },
         { name: "Pink 8", color: "#c2255c" },
         { name: "Pink 9", color: "#a61e4d" },

         // Yellow
         { name: "Yellow 0", color: "#fffde7" },
         { name: "Yellow 1", color: "#fff9c4" },
         { name: "Yellow 2", color: "#fff59d" },
         { name: "Yellow 3", color: "#fff176" },
         { name: "Yellow 4", color: "#ffee58" },
         { name: "Yellow 5", color: "#ffeb3b" },
         { name: "Yellow 6", color: "#fdd835" },
         { name: "Yellow 7", color: "#fbc02d" },
         { name: "Yellow 8", color: "#f9a825" },
         { name: "Yellow 9", color: "#f57f17" },

         // Amber
         { name: "Amber 0", color: "#fff8e1" },
         { name: "Amber 1", color: "#ffecb3" },
         { name: "Amber 2", color: "#ffe082" },
         { name: "Amber 3", color: "#ffd54f" },
         { name: "Amber 4", color: "#ffca28" },
         { name: "Amber 5", color: "#ffc107" },
         { name: "Amber 6", color: "#ffb300" },
         { name: "Amber 7", color: "#ffa000" },
         { name: "Amber 8", color: "#ff8f00" },
         { name: "Amber 9", color: "#ff6f00" },

         // Orange
         { name: "Orange 0", color: "#fff4e6" },
         { name: "Orange 1", color: "#ffe8cc" },
         { name: "Orange 2", color: "#ffd8a8" },
         { name: "Orange 3", color: "#ffc078" },
         { name: "Orange 4", color: "#ffa94d" },
         { name: "Orange 5", color: "#ff922b" },
         { name: "Orange 6", color: "#fd7e14" },
         { name: "Orange 7", color: "#f76707" },
         { name: "Orange 8", color: "#e8590c" },
         { name: "Orange 9", color: "#d9480f" },

         // Deep Orange
         { name: "Deep Orange 0", color: "#fbe9e7" },
         { name: "Deep Orange 1", color: "#ffccbc" },
         { name: "Deep Orange 2", color: "#ffab91" },
         { name: "Deep Orange 3", color: "#ff8a65" },
         { name: "Deep Orange 4", color: "#ff7043" },
         { name: "Deep Orange 5", color: "#ff5722" },
         { name: "Deep Orange 6", color: "#f4511e" },
         { name: "Deep Orange 7", color: "#e64a19" },
         { name: "Deep Orange 8", color: "#d84315" },
         { name: "Deep Orange 9", color: "#bf360c" },

         // Grape
         { name: "Grape 0", color: "#f8f0fc" },
         { name: "Grape 1", color: "#f3d9fa" },
         { name: "Grape 2", color: "#eebefa" },
         { name: "Grape 3", color: "#e599f7" },
         { name: "Grape 4", color: "#da77f2" },
         { name: "Grape 5", color: "#cc5de8" },
         { name: "Grape 6", color: "#be4bdb" },
         { name: "Grape 7", color: "#ae3ec9" },
         { name: "Grape 8", color: "#9c36b5" },
         { name: "Grape 9", color: "#862e9c" },

         // Violet
         { name: "Violet 0", color: "#f3f0ff" },
         { name: "Violet 1", color: "#e5dbff" },
         { name: "Violet 2", color: "#d0bfff" },
         { name: "Violet 3", color: "#b197fc" },
         { name: "Violet 4", color: "#9775fa" },
         { name: "Violet 5", color: "#845ef7" },
         { name: "Violet 6", color: "#7950f2" },
         { name: "Violet 7", color: "#7048e8" },
         { name: "Violet 8", color: "#6741d9" },
         { name: "Violet 9", color: "#5f3dc4" },

         // Purple
         { name: "Purple 0", color: "#f3e5f5" },
         { name: "Purple 1", color: "#e1bee7" },
         { name: "Purple 2", color: "#ce93d8" },
         { name: "Purple 3", color: "#ba68c8" },
         { name: "Purple 4", color: "#ab47bc" },
         { name: "Purple 5", color: "#9c27b0" },
         { name: "Purple 6", color: "#8e24aa" },
         { name: "Purple 7", color: "#7b1fa2" },
         { name: "Purple 8", color: "#6a1b9a" },
         { name: "Purple 9", color: "#4a148c" },

         // Indigo
         { name: "Indigo 0", color: "#edf2ff" },
         { name: "Indigo 1", color: "#dbe4ff" },
         { name: "Indigo 2", color: "#bac8ff" },
         { name: "Indigo 3", color: "#91a7ff" },
         { name: "Indigo 4", color: "#748ffc" },
         { name: "Indigo 5", color: "#5c7cfa" },
         { name: "Indigo 6", color: "#4c6ef5" },
         { name: "Indigo 7", color: "#4263eb" },
         { name: "Indigo 8", color: "#3b5bdb" },
         { name: "Indigo 9", color: "#364fc7" },

         // Blue
         { name: "Blue 0", color: "#e7f5ff" },
         { name: "Blue 1", color: "#d0ebff" },
         { name: "Blue 2", color: "#a5d8ff" },
         { name: "Blue 3", color: "#74c0fc" },
         { name: "Blue 4", color: "#4dabf7" },
         { name: "Blue 5", color: "#339af0" },
         { name: "Blue 6", color: "#228be6" },
         { name: "Blue 7", color: "#1c7ed6" },
         { name: "Blue 8", color: "#1971c2" },
         { name: "Blue 9", color: "#1864ab" },

         // Cyan
         { name: "Cyan 0", color: "#e3fafc" },
         { name: "Cyan 1", color: "#c5f6fa" },
         { name: "Cyan 2", color: "#99e9f2" },
         { name: "Cyan 3", color: "#66d9e8" },
         { name: "Cyan 4", color: "#3bc9db" },
         { name: "Cyan 5", color: "#22b8cf" },
         { name: "Cyan 6", color: "#15aabf" },
         { name: "Cyan 7", color: "#1098ad" },
         { name: "Cyan 8", color: "#0c8599" },
         { name: "Cyan 9", color: "#0b7285" },

         // Teal
         { name: "Teal 0", color: "#e6fcf5" },
         { name: "Teal 1", color: "#c3fae8" },
         { name: "Teal 2", color: "#96f2d7" },
         { name: "Teal 3", color: "#63e6be" },
         { name: "Teal 4", color: "#38d9a9" },
         { name: "Teal 5", color: "#20c997" },
         { name: "Teal 6", color: "#12b886" },
         { name: "Teal 7", color: "#0ca678" },
         { name: "Teal 8", color: "#099268" },
         { name: "Teal 9", color: "#087f5b" },

         // Green
         { name: "Green 0", color: "#e8f5e9" },
         { name: "Green 1", color: "#c8e6c9" },
         { name: "Green 2", color: "#a5d6a7" },
         { name: "Green 3", color: "#81c784" },
         { name: "Green 4", color: "#66bb6a" },
         { name: "Green 5", color: "#4caf50" },
         { name: "Green 6", color: "#43a047" },
         { name: "Green 7", color: "#388e3c" },
         { name: "Green 8", color: "#2e7d32" },
         { name: "Green 9", color: "#1b5e20" },

         // Light Green
         { name: "Light Green 0", color: "#ebfbee" },
         { name: "Light Green 1", color: "#d3f9d8" },
         { name: "Light Green 2", color: "#b2f2bb" },
         { name: "Light Green 3", color: "#8ce99a" },
         { name: "Light Green 4", color: "#69db7c" },
         { name: "Light Green 5", color: "#51cf66" },
         { name: "Light Green 6", color: "#40c057" },
         { name: "Light Green 7", color: "#37b24d" },
         { name: "Light Green 8", color: "#2f9e44" },
         { name: "Light Green 9", color: "#2b8a3e" },

         // Lime
         { name: "Lime 0", color: "#f4fce3" },
         { name: "Lime 1", color: "#e9fac8" },
         { name: "Lime 2", color: "#d8f5a2" },
         { name: "Lime 3", color: "#c0eb75" },
         { name: "Lime 4", color: "#a9e34b" },
         { name: "Lime 5", color: "#94d82d" },
         { name: "Lime 6", color: "#82c91e" },
         { name: "Lime 7", color: "#74b816" },
         { name: "Lime 8", color: "#66a80f" },
         { name: "Lime 9", color: "#5c940d" },

         // Brown
         { name: "Brown 0", color: "#efebe9" },
         { name: "Brown 1", color: "#d7ccc8" },
         { name: "Brown 2", color: "#bcaaa4" },
         { name: "Brown 3", color: "#a1887f" },
         { name: "Brown 4", color: "#8d6e63" },
         { name: "Brown 5", color: "#795548" },
         { name: "Brown 6", color: "#6d4c41" },
         { name: "Brown 7", color: "#5d4037" },
         { name: "Brown 8", color: "#4e342e" },
         { name: "Brown 9", color: "#3e2723" },

         // Gray
         { name: "Gray 0", color: "#f8f9fa" },
         { name: "Gray 1", color: "#f1f3f5" },
         { name: "Gray 2", color: "#e9ecef" },
         { name: "Gray 3", color: "#dee2e6" },
         { name: "Gray 4", color: "#ced4da" },
         { name: "Gray 5", color: "#adb5bd" },
         { name: "Gray 6", color: "#868e96" },
         { name: "Gray 7", color: "#495057" },
         { name: "Gray 8", color: "#343a40" },
         { name: "Gray 9", color: "#212529" },

         // Blue Gray
         { name: "Blue Gray 0", color: "#eceff1" },
         { name: "Blue Gray 1", color: "#cfd8dc" },
         { name: "Blue Gray 2", color: "#b0bec5" },
         { name: "Blue Gray 3", color: "#90a4ae" },
         { name: "Blue Gray 4", color: "#78909c" },
         { name: "Blue Gray 5", color: "#607d8b" },
         { name: "Blue Gray 6", color: "#546e7a" },
         { name: "Blue Gray 7", color: "#455a64" },
         { name: "Blue Gray 8", color: "#37474f" },
         { name: "Blue Gray 9", color: "#263238" },

        
      ];
      const grid = document.getElementById("grid");
      const text_colors = ["black", "white"];
      const levels = [
        {
          range: [0, 3],
          pass: "Fail",
          message: "Fails WCAG 2.0",
        },
        {
          range: [3, 4.5],
          pass: "AA Large",
          message: "Passes AA for large text (above 18pt or bold above 14pt)",
        },
        {
          range: [4.5, 7],
          pass: "AA",
          message:
            "Passes AA level for any size text and AAA for large text (above 18pt or bold above 14pt)",
        },
        {
          range: [7, 23], // 22 is highest, but upper bound check is < not <=
          pass: "AAA",
          message: "Passes AAA level for any size text",
        },
      ];
      const copy_buffer = document.getElementById("copy-buffer");

      // build the color chips grid
      for (let i in colors) {
        const d = document.createElement("a");
        d.classList.add("chip");
        d.href = "#";
        const sample = document.createElement("div");
        sample.classList.add("sample");
        sample.style.backgroundColor = colors[i].color;
        sample.appendChild(document.createTextNode(""));

       


        const info = document.createElement("div");
        info.classList.add("info");
        d.appendChild(sample);
        d.appendChild(info);

        let info_text = `<strong>${colors[i].name}</strong><br><span class="color" data-hex="${colors[i].color}">${colors[i].color}</span>`;

        //info.appendChild(document.createTextNode('YIQ: ' + getYIQ(colors[i].color)))

        let text_ratio = 0;
        let text_color = "#888";
        text_colors.map((color) => {
          const ratio = contrast(colors[i].color, color);
          if (ratio > text_ratio) {
            text_ratio = ratio;
            text_color = color;
          }
          const level = levels.filter(
            (o) => ratio >= o.range[0] && ratio < o.range[1]
          )[0];
          info_text += `<br>${color} ratio: ${ratio.toFixed(1)} (${
            level.pass
          })`;
        });
        info.innerHTML = info_text;

        sample.style.color = text_color;

        grid.appendChild(d);
      }

      grid.querySelector("[data-hex]").setAttribute("checked", true);

      // click on a chip (event delegation) to copy to clipboard
      grid.addEventListener(
        "click",
        (ev) => {
          var el = ev.target;
          while (el && el.nodeName !== "A") {
            el = el.parentNode;
          }
          if (el.nodeName === "A") {
            ev.preventDefault();
            el.classList.add("highlight");
            setTimeout(() => el.classList.remove("highlight"), 500);
            try {
              copy_buffer.value = el.querySelector("[data-hex]").innerHTML;
              copy_buffer.focus();
              copy_buffer.select();
              document.execCommand("copy");
              copy_buffer.value = "";
            } catch (err) {
              console.log("Failed to copy.");
            }
            ev.target.focus();
          }
        },
        false
      );

      function hex2Rgb(hex) {
        if (hex[0] === "#") {
          hex = hex.substr(1);
        } else if (hex === "black") {
          hex = "000000";
        } else if (hex === "white") {
          hex = "ffffff";
        }
        let r = 0,
          b = 0,
          g = 0;
        if (hex.length === 6) {
          r = parseInt(hex.substr(0, 2), 16);
          g = parseInt(hex.substr(2, 2), 16);
          b = parseInt(hex.substr(4, 2), 16);
        } else if (hex.length === 3) {
          r = parseInt(hex[0] + hex[0], 16);
          g = parseInt(hex[1] + hex[1], 16);
          b = parseInt(hex[2] + hex[2], 16);
        }
        return { r: r, g: g, b: b };
      }

      // rgb decimal value (0.0 - 1.0)
      function rgb2Decimal(n) {
        let d = (n / 255).toFixed(4).toString();
        return d.replace(/0+$/, "").replace(/\.$/, "");
      }

     

      // get color luminance
      function luminanace(hex) {
        const rgb = hex2Rgb(hex);
        const a = [rgb.r, rgb.g, rgb.b].map(function (v) {
          v /= 255;
          return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
        });
        return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
      }

      // two hex colors contrast based on luminance
      function contrast(hex1, hex2) {
        const lum1 = luminanace(hex1) + 0.05;
        const lum2 = luminanace(hex2) + 0.05;
        const ratio = lum1 / lum2;
        return lum2 > lum1 ? 1 / ratio : ratio;
      }